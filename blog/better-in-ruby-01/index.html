<!doctype html>

<html lang="en">
    <head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="dark" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="base" content="https://tduyng.com" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="robots" content="index, nofollow" />
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png" />
    <link rel="canonical" href="https://tduyng.com/blog/better-in-ruby-01" />
    
    <meta name="keywords" content="ruby" />
    
    <meta name="author" content="Duy NG" />
    <title>Better In Ruby - 01</title>
    <meta
        property="og:title"
        content="Better In Ruby - 01"
    />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Duy NG" />
    
    <meta name="description" content="Hidden Ruby gems: uncovering little known tips." />
    <meta property="og:description" content="Hidden Ruby gems: uncovering little known tips." />
    
    <meta property="og:image" content="https://tduyng.com/img/post-cover.webp" />
    <meta property="og:image:width" content="1500" />
    <meta property="og:image:height" content="750" />
    <meta name="twitter:image" content="https://tduyng.com/img/post-cover.webp" />
    <meta name="twitter:card" content="summary_large_image" />
    
    <link rel="stylesheet" href="/css/main.css" />
</head>

    <body class="post">
        
<header class="blur">
    <div id="header-wrapper">
        <nav>
            <a class="instant" href="/">tduyng</a>

            
            <button id="toggler" class="separator" aria-label="toggle expand">
                ☰
            </button>
            <span class="wrap left fold">[</span>

               
            <a class="instant " href="/blog">
                blog
            </a>

            
            <span class="wrap-separator fold">,</span>
              
            <a class="instant fold" href="/notes">
                notes
            </a>

            
            <span class="wrap-separator fold">,</span>
              
            <a class="instant fold" href="/about">
                about
            </a>

             

            <span class="wrap right fold">]</span>
            
        </nav>
    </div>
</header>


        <div id="wrapper">
            <div id="blank"></div>
            <aside>
                
<nav>
    <ul>
        
        <li>
            <a class="h2" href="#assigning-the-rest-of-an-array-to-a-variable">Assigning the rest of an array to a variable</a>
            
        </li>
        
        <li>
            <a class="h2" href="#word-array">Word array</a>
            
        </li>
        
        <li>
            <a class="h2" href="#concate-array">Concate array</a>
            
        </li>
        
        <li>
            <a class="h2" href="#format-decimal">Format decimal</a>
            
        </li>
        
        <li>
            <a class="h2" href="#remove-a-folder">Remove a folder</a>
            
        </li>
        
        <li>
            <a class="h2" href="#massive-assignment">Massive assignment</a>
            
        </li>
        
        <li>
            <a class="h2" href="#deep-copy">Deep copy</a>
            
        </li>
        
        <li>
            <a class="h2" href="#create-a-an-array-with-random-values">Create a an array with random values</a>
            
        </li>
        
    </ul>
</nav>


                <button id="back-to-top" aria-label="back to top">
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M11.9997 10.8284L7.04996 15.7782L5.63574 14.364L11.9997 8L18.3637 14.364L16.9495 15.7782L11.9997 10.8284Z" fill="currentColor"></path></svg>
                </button>
            </aside>
            <main>
                <div>
                    
<div
    id="copy-cfg"
    style="display: none"
    data-copy-icon="&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 24 24&#34; width=&#34;20&#34; height=&#34;20&#34;&gt;&lt;path d=&#34;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&#34; fill=&#34;currentColor&#34;&gt;&lt;/path&gt;&lt;/svg&gt;"
    data-check-icon="&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 24 24&#34; width=&#34;20&#34; height=&#34;20&#34;&gt;&lt;path d=&#34;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&#34; fill=&#34;currentColor&#34;&gt;&lt;/path&gt;&lt;/svg&gt;"
></div>

 
                    <article class="prose" data-backlink-icon="">
                        <h1>Better In Ruby - 01</h1>
                        <div id="post-info">
                            <div id="date">
                                <span id="publish">Aug 1, 2020</span>
                                
                            </div>

                            <div id="wordcount">
    <span>471 words - 3 min read</span>
</div>

                        </div>

                        <div id="tags">
                              
                            <a class="instant" href="/tags/ruby"><span>#</span>ruby</a>
                            
                        </div>

                        
 <p>Some tips you probably don't know in Ruby.</p>
<p>Today, I will make a series that I learned about tips and tricks in ruby.</p>
<h2 id="assigning-the-rest-of-an-array-to-a-variable">Assigning the rest of an array to a variable</h2>
<p><a style="padding:0px, margin:0px" name="assigning-rest-array" ></a></p>
<p>When destructuring an array, you can unpack and assign the remaining part of it to a variable using the rest pattern</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>  a <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span><span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span>  b, <span style="color:#ff79c6">*</span>rest <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">*</span>a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  b    <span style="color:#6272a4"># =&gt; 1</span>
</span></span><span style="display:flex;"><span>  rest <span style="color:#6272a4"># =&gt; [2, 3]</span>
</span></span><span style="display:flex;"><span>  a    <span style="color:#6272a4"># =&gt; [1, 2, 3]</span>
</span></span></code></pre><h2 id="word-array">Word array</h2>
<p><a style="padding:0px, margin:0px" name="word-array"></a></p>
<p>When we want to add a separator in the string</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#f1fa8c">%w{This is a string, I want to separate by a comma}</span> <span style="color:#ff79c6">*</span> <span style="color:#f1fa8c">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># &#34;This, is, a, string,, I, want, to, separate, by, a, comma&#34;</span>
</span></span></code></pre><h2 id="concate-array">Concate array</h2>
<p><a style="padding:0px, margin:0px" name="concate-array"></a></p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">3</span> <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">[</span><span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span>, <span style="color:#bd93f9">1</span>, <span style="color:#bd93f9">2</span>, <span style="color:#bd93f9">3</span><span style="color:#ff79c6">]</span> <span style="color:#6272a4"># true</span>
</span></span><span style="display:flex;"><span>new_array <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">Array</span><span style="color:#ff79c6">.</span>new(<span style="color:#ff79c6">[</span><span style="color:#bd93f9">0</span><span style="color:#ff79c6">]</span>, <span style="color:#bd93f9">5</span>) <span style="color:#6272a4"># [0,0,0,0,0]</span>
</span></span></code></pre><h2 id="format-decimal">Format decimal</h2>
<p><a style="padding:0px, margin:0px" name="format-decimal"></a></p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>number <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">9</span><span style="color:#ff79c6">.</span><span style="color:#bd93f9">5</span>
</span></span><span style="display:flex;"><span><span style="color:#f1fa8c">&#34;%.2f&#34;</span> <span style="color:#ff79c6">%</span> number <span style="color:#6272a4"># =&gt; &#34;9.50&#34;</span>
</span></span><span style="display:flex;"><span>number<span style="color:#ff79c6">.</span>round(<span style="color:#bd93f9">2</span>)
</span></span></code></pre><h2 id="remove-a-folder">Remove a folder</h2>
<p><a style="padding:0px, margin:0px" name="remove-folder"></a></p>
<p>This is a relatively common job of developer. There a many different ways to delete a folder and this is one of the shortest and fastest way to do:</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">require</span> <span style="color:#f1fa8c">&#39;fileutils&#39;</span>
</span></span><span style="display:flex;"><span>FileUtils<span style="color:#ff79c6">.</span>rm_r <span style="color:#f1fa8c">&#39;somedir&#39;</span>
</span></span></code></pre><h2 id="massive-assignment">Massive assignment</h2>
<p><a style="padding:0px, margin:0px" name="massive-assignment"></a></p>
<p>Massive assignment allow us to declare many variables at the same time</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>a,b,c,d <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>,<span style="color:#bd93f9">3</span>,<span style="color:#bd93f9">4</span>
</span></span></code></pre><p>This feature will be very useful in the method with many parameters</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">my_method</span>(<span style="color:#ff79c6">*</span>args)
</span></span><span style="display:flex;"><span>  a,b,c,d <span style="color:#ff79c6">=</span> args
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">end</span>
</span></span></code></pre><h2 id="deep-copy">Deep copy</h2>
<p><a style="padding:0px, margin:0px" name="deep-copy"></a></p>
<p>When we copy an object that contains others objects inside, array for example, you only copy references to those objects</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>food <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">%w( bread milk orange )</span>
</span></span><span style="display:flex;"><span>food<span style="color:#ff79c6">.</span>map(<span style="color:#ff79c6">&amp;</span><span style="color:#f1fa8c">:object_id</span>)
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">[</span><span style="color:#bd93f9">69612840</span>, <span style="color:#bd93f9">69612820</span>, <span style="color:#bd93f9">69612800</span><span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span><span style="color:#bd93f9">122</span><span style="color:#ff79c6">]</span> pry(main)<span style="color:#ff79c6">&gt;</span> food<span style="color:#ff79c6">.</span>clone<span style="color:#ff79c6">.</span>map(<span style="color:#ff79c6">&amp;</span><span style="color:#f1fa8c">:object_id</span>)
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">[</span><span style="color:#bd93f9">69612840</span>, <span style="color:#bd93f9">69612820</span>, <span style="color:#bd93f9">69612800</span><span style="color:#ff79c6">]</span>
</span></span></code></pre><p>Using <code>Marshal</code> (usually use for <a href="https://en.wikipedia.org/wiki/Serialization">serialization</a>), you can create a deep copy.</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">deep_copy</span>(obj)
</span></span><span style="display:flex;"><span>  Marshal<span style="color:#ff79c6">.</span>load(Marshal<span style="color:#ff79c6">.</span>dump(obj))
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">end</span>
</span></span></code></pre><p>See the result:</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>ObjectSpace<span style="color:#ff79c6">.</span>each_object(<span style="color:#8be9fd;font-style:italic">String</span>)<span style="color:#ff79c6">.</span>select{<span style="color:#ff79c6">|</span>x<span style="color:#ff79c6">|</span> x <span style="color:#ff79c6">==</span> food<span style="color:#ff79c6">.</span>first}<span style="color:#ff79c6">.</span>count
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#bd93f9">54</span>
</span></span><span style="display:flex;"><span>deep_copy(food)<span style="color:#ff79c6">.</span>map <span style="color:#ff79c6">&amp;</span><span style="color:#f1fa8c">:object_id</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">[</span><span style="color:#bd93f9">77564660</span>, <span style="color:#bd93f9">77564420</span>, <span style="color:#bd93f9">77564300</span><span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span>ObjectSpace<span style="color:#ff79c6">.</span>each_object(<span style="color:#8be9fd;font-style:italic">String</span>)<span style="color:#ff79c6">.</span>select{<span style="color:#ff79c6">|</span>x<span style="color:#ff79c6">|</span> x <span style="color:#ff79c6">==</span> food<span style="color:#ff79c6">.</span>first}<span style="color:#ff79c6">.</span>count
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#bd93f9">56</span>
</span></span><span style="display:flex;"><span>
</span></span></code></pre><p><strong>Bonus</strong>: Difference between <code>clone</code> and <code>dup</code>(They are almost the same, but there are two points that <strong>dup</strong> doesn't have)</p>
<ul>
<li>Clone also singleton class of copied object</li>
<li>Keep the frozen state of copied object</li>
</ul>
<p>For example:</p>
<ul>
<li>
<p>Singleton methods</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>a <span style="color:#ff79c6">=</span> Object<span style="color:#ff79c6">.</span>new
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">a</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">foo</span>; <span style="color:#f1fa8c">:foo</span> <span style="color:#ff79c6">end</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">p</span> a<span style="color:#ff79c6">.</span>foo
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">:foo</span>
</span></span><span style="display:flex;"><span>b <span style="color:#ff79c6">=</span> a<span style="color:#ff79c6">.</span>dup
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">p</span> b<span style="color:#ff79c6">.</span>foo
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> undefined <span style="color:#8be9fd;font-style:italic">method</span> <span style="color:#f1fa8c">`foo&#39; for #&lt;Object:0x007f8bc395ff00&gt; (NoMethodError)
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">c = a.clone
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">c.foo
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">=&gt; :foo
</span></span></span></code></pre></li>
<li>
<p>Frozen state</p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span>a <span style="color:#ff79c6">=</span> Object<span style="color:#ff79c6">.</span>new
</span></span><span style="display:flex;"><span>a<span style="color:#ff79c6">.</span>freeze
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">p</span> a<span style="color:#ff79c6">.</span>frozen?
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">true</span>
</span></span><span style="display:flex;"><span>b <span style="color:#ff79c6">=</span> a<span style="color:#ff79c6">.</span>dup
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">p</span> b<span style="color:#ff79c6">.</span>frozen?
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span>c <span style="color:#ff79c6">=</span> a<span style="color:#ff79c6">.</span>clone
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">p</span> c<span style="color:#ff79c6">.</span>frozen?
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">=&gt;</span> <span style="color:#ff79c6">true</span>
</span></span></code></pre></li>
</ul>
<h2 id="create-a-an-array-with-random-values">Create a an array with random values</h2>
<p><a style="padding:0px, margin:0px" name="random-array"></a></p>
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;"><code><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">Array</span><span style="color:#ff79c6">.</span>new(<span style="color:#bd93f9">10</span>) { <span style="color:#8be9fd;font-style:italic">rand</span> <span style="color:#bd93f9">300</span> }
</span></span></code></pre><p>It will create an array with 10 item that have the random values from 0 to 299</p>
<hr>
<p>Thanks you for reading! Stay tunned to update the next chapter.</p>
 <div class="pagination">
    

    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="/blog/rails-5-or-rails-6/">
                <span class="button__icon">←</span>
                <span class="button__text">Rails 5 or Rails 6 ?</span>
            </a>
        </span>
         
        <span class="button next">
            <a href="/blog/better-in-ruby-02/">
                <span class="button__text">Better In Ruby - 02</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

                    </article>
                    <div class="sharing-buttons">
    <h3>Share this post:</h3>
    <ul class="sharing-list" id="right">
        <li>
            <a
                href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01&t=Better%20In%20Ruby%20-%2001"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/hacker-news.svg" alt="Share on Hacker News" class="sharing-icon" />
            </a>
        </li>
        <li>
            <a
                href="https://www.reddit.com/submit?url=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01&title=Better%20In%20Ruby%20-%2001"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/reddit.svg" alt="Share on Reddit" class="sharing-icon" />
            </a>
        </li>

        <li>
            <a
                href="https://mastodon.social/share?url=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01&text=Better%20In%20Ruby%20-%2001"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/mastodon.svg" alt="Share on Mastodon" class="sharing-icon" />
            </a>
        </li>

        <li>
            <a
                href="https://x.com/intent/tweet?url=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01&text=Better%20In%20Ruby%20-%2001"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/x.svg" alt="Share on Twitter" class="sharing-icon" />
            </a>
        </li>

        <li>
            <a
                href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/facebook.svg" alt="Share on Facebook" class="sharing-icon" />
            </a>
        </li>

        <li>
            <a
                href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01&title=Better%20In%20Ruby%20-%2001"
                target="_blank"
                rel="noopener noreferrer"
            >
                <img src="/icon/linkedin.svg" alt="Share on LinkedIn" class="sharing-icon" />
            </a>
        </li>

        <li>
            <a href="mailto:?subject=Better%20In%20Ruby%20-%2001&body=https%3a%2f%2ftduyng.com%2fblog%2fbetter-in-ruby-01">
                <img src="/icon/email.svg" alt="Share via Email" class="sharing-icon" />
            </a>
        </li>
    </ul>
</div>
 
<div
    class="reaction right"
    data-endpoint="https://reaction.tienduy-nguyen-dev.workers.dev"
></div>

 

                </div>

                
 <footer>
    <div class="footer-menu">
        
        <a class="instant fold" href="/tags">tags</a>
        
        <a class="instant fold" href="/subscribe">subscribe</a>
        
        <a class="instant fold" href="/contact">contact</a>
        
        <a class="instant fold" href="/privacy">privacy</a>
        
        <a class="instant fold" href="/atom.xml">rss</a>
        
    </div>
    <div class="copyright">
        ©2025 Duy NG
        <span>|</span>
        Built with
        <a href="https://github.com/tduyng/gozzi" rel="noreferrer" target="_blank">gozzi</a>
    </div>
</footer>

            </main>
        </div>
        <script src="/js/main.js" defer></script>
<script src="/js/lightense.min.js" defer></script>
 
<script
    async
    defer
    data-website-id="0403ec1f-fbf8-4e6c-b24b-0c585ca25873"
    src="https://cloud.umami.is/script.js"
    data-do-not-track="true"
></script>


    </body>
</html>
